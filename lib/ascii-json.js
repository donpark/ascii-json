// Generated by CoffeeScript 1.9.3
(function() {
  var asciiJSON;

  asciiJSON = exports;

  asciiJSON.isAscii = function(text) {
    return /^[\x00-\x7F]*$/.test(text);
  };

  asciiJSON.escapeNonAsciis = function(text) {
    var chars, code, i;
    chars = [];
    i = 0;
    while (i < text.length) {
      code = text.charCodeAt(i);
      if (code < 128) {
        chars.push(text[i]);
      } else {
        if (code < 256) {
          chars.push('\\u00');
        } else if (code < 4096) {
          chars.push('\\u0');
        } else {
          chars.push('\\u');
        }
        chars.push(code.toString(16));
      }
      i++;
    }
    return chars.join('');
  };

  asciiJSON.ignoreNonAsciis = function(text) {
    var chars, code, i;
    chars = [];
    i = 0;
    while (i < text.length) {
      code = text.charCodeAt(i);
      if (code < 128) {
        chars.push(text[i]);
      }
      i++;
    }
    return chars.join('');
  };

  asciiJSON.stringify = function(object, ignoreNonAscii) {
    var utf8JSON;
    utf8JSON = JSON.stringify(object);
    if (ignoreNonAscii) {
      return asciiJSON.ignoreNonAsciis(utf8JSON);
    } else {
      return asciiJSON.escapeNonAsciis(utf8JSON);
    }
  };

  asciiJSON.parse = JSON.parse;

}).call(this);
